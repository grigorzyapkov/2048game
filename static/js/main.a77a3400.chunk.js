(this.webpackJsonp2048game=this.webpackJsonp2048game||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(8),o=n.n(i),a=(n(13),n(14),n(3)),s=n(4),u=n(2),l=[0,1,2,3],d=function(e,t){var n,r;return null===e&&null===t||(e&&(null===(n=Object.keys(e))||void 0===n?void 0:n.length))===(t&&(null===(r=Object.keys(t))||void 0===r?void 0:r.length))&&Object.keys(e).every((function(n){return e[n]===t[n]}))},j=function(e){if(e.length<16)return!1;for(var t=function(e,t,n){return e.some((function(e){return t.some((function(t){return n(e)===n(t)&&e.value===t.value}))}))},n=0;n<3;n++)if(t(m(e,n),m(e,n+1),(function(e){return e.positionY}))||t(x(e,n),x(e,n+1),(function(e){return e.positionX})))return!1;return!0},f=function(e,t){return b(e,(function(e){return e.positionY}),(function(e,t){return e.positionY=t}),t)},v=function(e,t){return b(e,(function(e){return e.positionX}),(function(e,t){return e.positionX=t}),t)},b=function(e,t,n,r){if(0===e.length)return[];var c=JSON.parse(JSON.stringify(e));c.sort((function(e,n){return t(e)-t(n)}));for(var i="left"===r?0:4-c.length,o=0;o<c.length;o++)n(c[o],i+o);"left"===r&&c.reverse();for(var a=c.length-1;a>=1;)if(c[a].value!==c[a-1].value||"2048"===c[a].value)a--;else{for(var s=0;s<=a-1;s++){var u="right"===r?1:-1;n(c[s],t(c[s])+u)}a-=2}return c},h=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=[];e>0;)t=[].concat(Object(s.a)(t),[O(t)]),e--;return t},O=function(e){var t=function(e){return[Math.floor(e/4),e%4]};Math.floor(16*Math.random());for(var n=Math.floor(16*Math.random()),r=t(n);p.apply(void 0,[e].concat(Object(s.a)(r)));)r=t(n=15===n?0:n+1);var c=Math.random()<=.2?"4":"2";return{id:y(e),value:c,type:"new",positionX:r[0],positionY:r[1]}},p=function(e,t,n){return e.some((function(e){return e.positionX===t&&e.positionY===n}))},m=function(e,t){return e.filter((function(e){return e.positionX===t}))},x=function(e,t){return e.filter((function(e){return e.positionY===t}))},y=function(e){return g(e)+1},g=function(e){return Math.max.apply(Math,[0].concat(Object(s.a)(e.map((function(e){return e.id})))))},w={ArrowUp:function(e){return l.map((function(t){return v(x(e,t),"left")})).flat()},ArrowDown:function(e){return l.map((function(t){return v(x(e,t),"right")})).flat()},ArrowRight:function(e){return l.map((function(t){return f(m(e,t),"right")})).flat()},ArrowLeft:function(e){return l.map((function(t){return f(m(e,t),"left")})).flat()}},N=420,E=520,M=73,C=97,k=121,S=(n(15),n(0)),A=Object(r.memo)((function(e){return Object(S.jsx)("div",{className:"tile tile-".concat(e.value),style:{transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},children:Object(S.jsx)("div",{className:"tileInner ".concat(e.type),children:e.value})})})),L=(n(17),function(e){return Object(S.jsx)("div",{children:e.tiles.map((function(t){return Object(S.jsx)(A,{value:t.value,type:t.type,x:t.positionY*e.factor,y:t.positionX*e.factor},t.id)}))})}),P=function(e){var t=Object(r.useState)(T()),n=Object(a.a)(t,2),c=n[0],i=n[1];Object(r.useEffect)((function(){var e=function(){i(T())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var o=e.tiles.sort((function(e,t){return e.id-t.id}));return Object(S.jsx)("div",{className:"tileContainer",children:Object(S.jsx)(L,{tiles:o,factor:c})})},T=function(){return window.innerWidth<=N?M:window.innerWidth<=E?C:k},I=(n(18),n(19),function(e){return Object(S.jsx)("button",{id:e.id,className:"appButton",onClick:e.onClick,children:e.children})}),Y=function(){var e=ce().dispatch;return Object(S.jsxs)("div",{id:"gameOverContainer",className:"gameOverContainer",children:[Object(S.jsx)("p",{children:"Game Over!"}),Object(S.jsx)(I,{onClick:function(t){return e({type:"restart"})},children:"Try again"})]})},R=function(e){return Object(S.jsxs)("div",{className:"boardContainer",children:[j(e.tiles)&&Object(S.jsx)(Y,{}),Object(S.jsx)(X,{}),Object(S.jsx)(P,{tiles:e.tiles})]})},X=function(){var e=Array.from(Array(4).keys()).map((function(e){var t=Array.from(Array(4).keys()).map((function(e){return Object(S.jsx)("div",{className:"cell"},e)}));return Object(S.jsx)("div",{className:"row",children:t},e)}));return Object(S.jsx)("div",{className:"gridContainer",children:e})},B=function(){var e=ce().gameState,t=Object(r.useReducer)(G,U()),n=Object(a.a)(t,2),c=n[0],i=n[1];return Object(r.useEffect)((function(){i({type:"addMove",payload:e})}),[e]),Object(r.useEffect)((function(){c.moves.length<2||c.loading||(i({type:"startMove"}),setTimeout((function(){i({type:"endMove"})}),100))}),[c]),Object(S.jsx)(R,{tiles:c.tiles})};function G(e,t){switch(t.type){case"addMove":return!t.payload.lastMove?U(t.payload.tiles,[t.payload]):Object(u.a)(Object(u.a)({},e),{},{moves:[].concat(Object(s.a)(e.moves),[t.payload])});case"startMove":var n=e.moves[0],r=e.moves[1],c=w[r.lastMove](n.tiles);return Object(u.a)(Object(u.a)({},e),{},{loading:!0,tiles:c});case"endMove":var i=e.moves[1];return{moves:e.moves.slice(1),loading:!1,tiles:i.tiles};default:throw new Error("Unhandled action: ".concat(t))}}var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{moves:t,loading:!1,tiles:e}},J=(n(20),n(21),function(e){return Object(S.jsxs)("div",{className:"scoreBox",children:[Object(S.jsx)("span",{className:"title",children:e.title}),Object(S.jsx)("span",{className:"score",children:e.score})]})}),D=(n(22),function(){var e=ce().gameState,t=Object(r.useReducer)(z,F(e.tiles)),n=Object(a.a)(t,2),c=n[0],i=n[1];return Object(r.useEffect)((function(){i({type:"change",payload:e.tiles})}),[e]),Object(r.useEffect)((function(){if(c.newPoints>0){var e=document.getElementById("additionScore");e.innerText="+".concat(c.newPoints);var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)}}),[c]),Object(S.jsxs)("div",{className:"scoresContainer",children:[Object(S.jsxs)("div",{style:{position:"relative"},children:[Object(S.jsx)(J,{title:"SCORE",score:c.score}),Object(S.jsx)("div",{className:"addScore",id:"additionScore"})]}),Object(S.jsx)(J,{title:"BEST",score:c.score})]})}),F=function(e){return{score:0,newPoints:0,tiles:e}},W=function(e,t){return e.some((function(e){return e.id===t.id}))},z=function(e,t){switch(t.type){case"change":var n=t.payload;if(2===n.length&&[1,2].every((function(e){return n.find((function(t){return t.id===e}))}))&&!e.tiles.every((function(e){return W(n,e)})))return F(n);if(e.tiles.every((function(e){return W(n,e)}))&&n.length===e.tiles.length+1)return Object(u.a)(Object(u.a)({},e),{},{tiles:n,newPoints:0});var r=g(n),c=n.reduce((function(t,n){return t+(n.id===r||W(e.tiles,n)?0:parseInt(n.value))}),0);return{tiles:n,newPoints:c,score:e.score+c};default:throw new Error("Unhandled action type: ".concat(t.type))}},H=(n(23),function(){return Object(S.jsx)("span",{className:"gameTitle",children:"2048"})}),_=function(){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("span",{children:["Join the numbers to get ",Object(S.jsx)("b",{children:"2048"}),"!"]}),Object(S.jsx)("br",{}),Object(S.jsx)("a",{href:"#id",children:"How to play \u2192"})]})},q=function(){var e=ce().dispatch;return Object(S.jsxs)("div",{className:"header",children:[Object(S.jsxs)("div",{className:"gameIntro",children:[Object(S.jsx)(H,{}),Object(S.jsx)(_,{})]}),Object(S.jsxs)("div",{className:"actions",children:[Object(S.jsx)(D,{}),Object(S.jsx)(I,{id:"restartGameBtn",onClick:function(t){return e({type:"restart"})},children:"New Game"})]})]})},K=function(e){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:e.title}),e.children,e.bottomSeparator?Object(S.jsx)("hr",{}):null]})},Q=function(e){return Object(S.jsx)(K,{title:"HOW TO PLAY",bottomSeparator:e.bottomSeparator,children:Object(S.jsxs)("p",{children:["Use your arrow keys to move the numbers. The same numbers will be merged into one when they touch. After each move, a new number (",Object(S.jsx)("strong",{children:"2"})," or ",Object(S.jsx)("strong",{children:"4"}),") is generated at a random empty position. Merge the numbers and build a 2048 number to ",Object(S.jsx)("strong",{children:"WIN"})," the game!"]})})},V=function(e){return Object(S.jsx)(K,{title:"LEARN MORE",bottomSeparator:e.bottomSeparator,children:Object(S.jsxs)("p",{children:["This app is inspired by"," ",Object(S.jsx)("a",{href:"https://play2048.co/",children:"https://play2048.co/"}),". If you want to learn more about the project tech stack or see the code, visit the repository on\xa0",Object(S.jsx)("a",{href:"https://github.com/grigorzyapkov/2048game",target:"_blank",rel:"noreferrer",children:"Github"})]})})},Z=function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)(Q,{}),Object(S.jsx)("hr",{}),Object(S.jsx)(V,{})]})},$=c.a.createContext(null),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return{tiles:h(e),lastMove:null}};function te(e,t){switch(t.type){case"restart":return ee();case"move":var n=(0,w[t.payload])(e.tiles);return r=e.tiles,c=n,r.every((function(e){return c.some((function(t){return d(e,t)}))}))?e:(n=function(e){var t=y(e),n={};return e.forEach((function(e){var r="".concat(e.positionX).concat(e.positionY);if(n[r]){var c=2*parseInt(e.value);n[r]=Object(u.a)(Object(u.a)({},e),{},{id:t++,value:c.toString(),type:"merged"})}else n[r]=e})),Object.values(n)}(n),{tiles:[].concat(Object(s.a)(n),[O(n)]),lastMove:t.payload});default:throw new Error("Unhandled action: ".concat(t))}var r,c}var ne=function(e){var t=Object(r.useReducer)(te,ee()),n=Object(a.a)(t,2),c=n[0],i=n[1];return Object(r.useEffect)((function(){var e=function(e){e.preventDefault(),["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)&&i({type:"move",payload:e.key})};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[i]),Object(S.jsx)($.Provider,{value:{gameState:c,dispatch:i},children:e.children})},re=function(){return Object(S.jsx)(ne,{children:Object(S.jsxs)("div",{className:"container",children:[Object(S.jsxs)("div",{className:"gameContainer",children:[Object(S.jsx)(q,{}),Object(S.jsx)(B,{})]}),Object(S.jsx)(Z,{})]})})};function ce(){var e=Object(r.useContext)($);if(void 0===e)throw new Error("useGameContext must be used within a GameContextProvider");return e}var ie=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)("main",{children:Object(S.jsx)(re,{})})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),i(e),o(e)}))};o.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(ie,{})}),document.getElementById("root")),oe()}],[[24,1,2]]]);
//# sourceMappingURL=main.a77a3400.chunk.js.map