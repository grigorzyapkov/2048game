(this.webpackJsonp2048game=this.webpackJsonp2048game||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(8),c=n.n(o),a=(n(13),n(3)),s=n(4),u=n(2),l=[0,1,2,3],d=function(e,t){var n,r;return null===e&&null===t||(e&&(null===(n=Object.keys(e))||void 0===n?void 0:n.length))===(t&&(null===(r=Object.keys(t))||void 0===r?void 0:r.length))&&Object.keys(e).every((function(n){return e[n]===t[n]}))},f=function(e,t){return m(e,(function(e){return e.positionY}),(function(e,t){return e.positionY=t}),t)},v=function(e,t){return m(e,(function(e){return e.positionX}),(function(e,t){return e.positionX=t}),t)},m=function(e,t,n,r){if(0===e.length)return[];var i=JSON.parse(JSON.stringify(e));i.sort((function(e,n){return t(e)-t(n)}));for(var o="left"===r?0:4-i.length,c=0;c<i.length;c++)n(i[c],o+c);"left"===r&&i.reverse();for(var a=i.length-1;a>=1;)if(i[a].value!==i[a-1].value||2048===i[a].value)a--;else{for(var s=0;s<=a-1;s++){var u="right"===r?1:-1;n(i[s],t(i[s])+u)}a-=2}return i},b=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=[];e>0;)t=[].concat(Object(s.a)(t),[j(t)]),e--;return t},j=function(e){var t=function(e){return[Math.floor(e/4),e%4]};Math.floor(16*Math.random());for(var n=Math.floor(16*Math.random()),r=t(n);h.apply(void 0,[e].concat(Object(s.a)(r)));)r=t(n=15===n?0:n+1);var i=Math.random()<=.2?4:2;return{id:O(e),value:i,type:"new",positionX:r[0],positionY:r[1]}},h=function(e,t,n){return e.some((function(e){return e.positionX===t&&e.positionY===n}))},p=function(e,t){return e.filter((function(e){return e.positionX===t}))},g=function(e,t){return e.filter((function(e){return e.positionY===t}))},O=function(e){return x(e)+1},x=function(e){return Math.max.apply(Math,[0].concat(Object(s.a)(e.map((function(e){return e.id})))))},y={up:function(e){return l.map((function(t){return v(g(e,t),"left")})).flat()},down:function(e){return l.map((function(t){return v(g(e,t),"right")})).flat()},right:function(e){return l.map((function(t){return f(p(e,t),"right")})).flat()},left:function(e){return l.map((function(t){return f(p(e,t),"left")})).flat()}},w=420,k=520,E=73,S=97,N=121,M={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},C=(n(14),n(0)),I=Object(r.memo)((function(e){return Object(C.jsx)("div",{className:"tile tile-".concat(e.value),style:{transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},children:Object(C.jsx)("div",{className:"tileInner ".concat(e.type),children:e.value})})})),L=(n(16),function(e){return Object(C.jsx)("div",{children:e.tiles.map((function(t){return Object(C.jsx)(I,{value:t.value,type:t.type,x:t.positionY*e.factor,y:t.positionX*e.factor},t.id)}))})}),T=function(e){var t=Object(r.useState)(P()),n=Object(a.a)(t,2),i=n[0],o=n[1];Object(r.useEffect)((function(){var e=function(){o(P())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var c=e.tiles.sort((function(e,t){return e.id-t.id}));return Object(C.jsx)("div",{className:"tileContainer",children:Object(C.jsx)(L,{tiles:c,factor:i})})},P=function(){return window.innerWidth<=w?E:window.innerWidth<=k?S:N},R=(n(17),function(e){return Object(C.jsx)("button",{id:e.id,className:"appButton",onClick:e.onClick,children:e.children})}),z={WIN:{message:"Congratulations! You Win!",buttonText:"Play again",containerClass:"gameResultWin"},LOSE:{message:"Game Over!",buttonText:"Try again",containerClass:"gameResultLose"}},A=function(e){var t=me().dispatch,n=e.isWon?z.WIN:z.LOSE,r=n.message,i=n.buttonText,o=n.containerClass;return Object(C.jsxs)("div",{className:"gameResult ".concat(o),children:[Object(C.jsx)("p",{children:r}),Object(C.jsx)(R,{onClick:function(e){return t({type:"restart"})},children:i})]})},W=function(e){return function(e){return e.some((function(e){return 2048===e.value}))}(e)?"WIN":function(e){if(e.length<16)return!1;for(var t=function(e,t,n){return e.some((function(e){return t.some((function(t){return n(e)===n(t)&&e.value===t.value}))}))},n=0;n<3;n++)if(t(p(e,n),p(e,n+1),(function(e){return e.positionY}))||t(g(e,n),g(e,n+1),(function(e){return e.positionX})))return!1;return!0}(e)?"GAME_OVER":"IN_PROGRESS"},Y=function(){var e=Array.from(Array(4).keys()).map((function(e){var t=Array.from(Array(4).keys()).map((function(e){return Object(C.jsx)("div",{className:"cell"},e)}));return Object(C.jsx)("div",{className:"row",children:t},e)}));return Object(C.jsx)("div",{className:"gridContainer",children:e})},X=function(e){var t=W(e.tiles);return Object(C.jsxs)("div",{id:"boardContainer",children:["IN_PROGRESS"!==t&&Object(C.jsx)(A,{isWon:"WIN"===t}),Object(C.jsx)(Y,{}),Object(C.jsx)(T,{tiles:e.tiles})]})},G=(n(18),function(){var e=me().gameState,t=Object(r.useReducer)(B,J()),n=Object(a.a)(t,2),i=n[0],o=n[1];return Object(r.useEffect)((function(){o({type:"addMove",payload:e})}),[e]),Object(r.useEffect)((function(){i.moves.length<2||i.loading||(o({type:"startMove"}),setTimeout((function(){o({type:"endMove"})}),100))}),[i]),Object(C.jsx)(X,{tiles:i.tiles})});function B(e,t){switch(t.type){case"addMove":return!t.payload.lastMove||0===e.tiles.length?J(t.payload):Object(u.a)(Object(u.a)({},e),{},{moves:[].concat(Object(s.a)(e.moves),[t.payload])});case"startMove":var n=e.moves[0],r=e.moves[1],i=y[r.lastMove](n.tiles);return Object(u.a)(Object(u.a)({},e),{},{loading:!0,tiles:i});case"endMove":var o=e.moves[1];return{moves:e.moves.slice(1),loading:!1,tiles:o.tiles};default:throw new Error("Unhandled action: ".concat(t))}}var J=function(e){return e?{moves:[e],loading:!1,tiles:e.tiles}:{moves:[],loading:!1,tiles:[]}},D=null,_=null,q=function(){var e=me().dispatch;return Object(r.useEffect)((function(){function t(e){if(1===e.touches.length){var t=e.touches[0];D=t.clientX,_=t.clientY}}function n(t){if(D&&_&&!(t.touches.length>0)){var n=t.changedTouches[0],r=n.clientX,i=n.clientY,o=D-r,c=_-i;Math.abs(o)>Math.abs(c)?e(o<0?{type:"move",payload:"right"}:{type:"move",payload:"left"}):e(c<0?{type:"move",payload:"down"}:{type:"move",payload:"up"}),D=null,_=null}}var r=document.getElementById("boardContainer");return r.addEventListener("touchstart",t),r.addEventListener("touchend",n),function(){r.removeEventListener("touchstart",t),r.removeEventListener("touchend",n)}}),[e]),Object(C.jsx)(G,{})},U=(n(19),"2048game"),F=function(e,t){return"function"===typeof t?t(e):t},H=function(e,t){try{var n=JSON.parse(window.localStorage.getItem(U)),r=null===n||void 0===n?void 0:n[e];return null!==r&&void 0!==r?r:t}catch(i){return console.log(i),t}};var V=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F,i=Object(r.useReducer)(n,H(e,t)),o=Object(a.a)(i,2),c=o[0],s=o[1];return Object(r.useEffect)((function(){var t=JSON.parse(window.localStorage.getItem(U))||{};t[e]=c,window.localStorage.setItem(U,JSON.stringify(t))}),[c,e]),[c,s]},K=(n(20),function(e){return Object(C.jsxs)("div",{className:"scoreBox",children:[Object(C.jsx)("span",{className:"title",children:e.title}),Object(C.jsx)("span",{className:"score",children:e.score})]})}),Q=(n(21),function(){var e=me().gameState,t=V("scores",Z(),ee),n=Object(a.a)(t,2),i=n[0],o=n[1];return Object(r.useEffect)((function(){o({type:"change",payload:e.tiles})}),[e.tiles,o]),Object(r.useEffect)((function(){if(i.newPoints>0){var e=document.getElementById("additionScore");e.innerText="+".concat(i.newPoints);var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)}}),[i]),Object(C.jsxs)("div",{className:"scoresContainer",children:[Object(C.jsxs)("div",{style:{position:"relative"},children:[Object(C.jsx)(K,{title:"SCORE",score:i.score}),Object(C.jsx)("div",{className:"addScore",id:"additionScore"})]}),Object(C.jsx)(K,{title:"BEST",score:i.bestScore})]})}),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{score:0,newPoints:0,bestScore:0,tiles:e}},$=function(e,t){return e.some((function(e){return e.id===t.id}))},ee=function(e,t){switch(t.type){case"change":var n=t.payload;if(e.tiles.length===n.length&&e.tiles.every((function(e){return $(n,e)})))return e;if(2===n.length&&[1,2].every((function(e){return n.find((function(t){return t.id===e}))}))&&!e.tiles.every((function(e){return $(n,e)})))return Object(u.a)(Object(u.a)({},Z(n)),{},{bestScore:e.bestScore});if(e.tiles.every((function(e){return $(n,e)}))&&n.length===e.tiles.length+1)return Object(u.a)(Object(u.a)({},e),{},{tiles:n,newPoints:0});var r=x(n),i=n.reduce((function(t,n){return t+(n.id===r||$(e.tiles,n)?0:n.value)}),0),o=e.score+i,c=Math.max(o,e.bestScore);return{tiles:n,newPoints:i,score:o,bestScore:c};default:throw new Error("Unhandled action type: ".concat(t.type))}},te=(n(22),function(){return Object(C.jsx)("span",{className:"gameTitle",children:"2048"})}),ne=function(){return Object(C.jsxs)("div",{children:[Object(C.jsxs)("span",{children:["Join the numbers to get ",Object(C.jsx)("b",{children:"2048"}),"!"]}),Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"#howToPlaySection",children:"How to play \u2192"})]})},re=function(){var e=me().dispatch;return Object(C.jsxs)("div",{className:"header",children:[Object(C.jsxs)("div",{className:"gameIntro",children:[Object(C.jsx)(te,{}),Object(C.jsx)(ne,{})]}),Object(C.jsxs)("div",{className:"actions",children:[Object(C.jsx)(Q,{}),Object(C.jsx)(R,{id:"restartGameBtn",onClick:function(t){return e({type:"restart"})},children:"New Game"})]})]})},ie={mobileDevice:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,mobileDeviceExtend:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i},oe=function(e){return Object(C.jsxs)("div",{id:e.id,children:[Object(C.jsx)("h4",{children:e.title}),e.children,e.bottomSeparator?Object(C.jsx)("hr",{}):null]})},ce=function(){var e,t=(e=navigator.userAgent||navigator.vendor,ie.mobileDevice.test(e)||ie.mobileDeviceExtend.test(e.substring(0,4))?"Swipe with your fingers to move the numbers.":"Use your arrow keys to move the numbers.");return Object(C.jsx)(oe,{id:"howToPlaySection",title:"HOW TO PLAY",bottomSeparator:!0,children:Object(C.jsxs)("p",{children:[t," The same numbers will be merged into one when they touch. After each move, a new number (",Object(C.jsx)("strong",{children:"2"})," or ",Object(C.jsx)("strong",{children:"4"}),") is generated at a random empty position. Merge the numbers and build a 2048 number to"," ",Object(C.jsx)("strong",{children:"WIN"})," the game!"]})})},ae=function(){return Object(C.jsx)(oe,{title:"LEARN MORE",children:Object(C.jsxs)("p",{children:["This app is inspired by"," ",Object(C.jsx)("a",{href:"https://play2048.co/",children:"https://play2048.co/"}),". If you want to learn more about the project tech stack or see the code, visit the\xa0",Object(C.jsx)("a",{href:"https://github.com/grigorzyapkov/2048game",target:"_blank",rel:"noreferrer",children:"Github repository"}),"."]})})},se=function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)(ce,{}),Object(C.jsx)(ae,{})]})},ue=i.a.createContext(null),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return{tiles:b(e),lastMove:null}};function de(e,t){switch(t.type){case"restart":return le();case"move":var n=(0,y[t.payload])(e.tiles);return r=e.tiles,i=n,r.every((function(e){return i.some((function(t){return d(e,t)}))}))?e:(n=function(e){var t=O(e),n={};return e.forEach((function(e){var r="".concat(e.positionX).concat(e.positionY);if(n[r]){var i=2*e.value;n[r]=Object(u.a)(Object(u.a)({},e),{},{id:t++,value:i,type:"merged"})}else n[r]=e})),Object.values(n)}(n),{tiles:[].concat(Object(s.a)(n),[j(n)]),lastMove:t.payload});default:throw new Error("Unhandled action: ".concat(t))}var r,i}var fe=function(e){var t=V("game",le(),de),n=Object(a.a)(t,2),i=n[0],o=n[1];return Object(r.useEffect)((function(){var e=function(e){e.preventDefault();var t=M[e.key];t&&o({type:"move",payload:t})};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[o]),Object(C.jsx)(ue.Provider,{value:{gameState:i,dispatch:o},children:e.children})},ve=function(){return Object(C.jsx)(fe,{children:Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{className:"gameContainer",children:[Object(C.jsx)(re,{}),Object(C.jsx)(q,{})]}),Object(C.jsx)(se,{})]})})};function me(){var e=Object(r.useContext)(ue);if(void 0===e)throw new Error("useGameContext must be used within a GameContextProvider");return e}var be=function(){return Object(C.jsx)("div",{children:Object(C.jsx)("main",{children:Object(C.jsx)(ve,{})})})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),o(e),c(e)}))};c.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(be,{})}),document.getElementById("root")),je()}],[[23,1,2]]]);
//# sourceMappingURL=main.9d0f3d7a.chunk.js.map