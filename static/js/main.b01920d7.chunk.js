(this.webpackJsonp2048game=this.webpackJsonp2048game||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),c=n(8),o=n.n(c),a=(n(13),n(14),n(3)),s=n(4),u=n(2),l=[0,1,2,3],f=function(e,t){var n,r;return null===e&&null===t||(e&&(null===(n=Object.keys(e))||void 0===n?void 0:n.length))===(t&&(null===(r=Object.keys(t))||void 0===r?void 0:r.length))&&Object.keys(e).every((function(n){return e[n]===t[n]}))},d=function(e){if(e.length<16)return!1;for(var t=function(e,t,n){return e.some((function(e){return t.some((function(t){return n(e)===n(t)&&e.value===t.value}))}))},n=0;n<3;n++)if(t(m(e,n),m(e,n+1),(function(e){return e.positionY}))||t(x(e,n),x(e,n+1),(function(e){return e.positionX})))return!1;return!0},j=function(e,t){return b(e,(function(e){return e.positionY}),(function(e,t){return e.positionY=t}),t)},v=function(e,t){return b(e,(function(e){return e.positionX}),(function(e,t){return e.positionX=t}),t)},b=function(e,t,n,r){if(0===e.length)return[];var i=JSON.parse(JSON.stringify(e));i.sort((function(e,n){return t(e)-t(n)}));for(var c="left"===r?0:4-i.length,o=0;o<i.length;o++)n(i[o],c+o);"left"===r&&i.reverse();for(var a=i.length-1;a>=1;)if(i[a].value!==i[a-1].value||"2048"===i[a].value)a--;else{for(var s=0;s<=a-1;s++){var u="right"===r?1:-1;n(i[s],t(i[s])+u)}a-=2}return i},h=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=[];e>0;)t=[].concat(Object(s.a)(t),[O(t)]),e--;return t},O=function(e){var t=function(e){return[Math.floor(e/4),e%4]};Math.floor(16*Math.random());for(var n=Math.floor(16*Math.random()),r=t(n);p.apply(void 0,[e].concat(Object(s.a)(r)));)r=t(n=15===n?0:n+1);var i=Math.random()<=.2?"4":"2";return{id:y(e),value:i,type:"new",positionX:r[0],positionY:r[1]}},p=function(e,t,n){return e.some((function(e){return e.positionX===t&&e.positionY===n}))},m=function(e,t){return e.filter((function(e){return e.positionX===t}))},x=function(e,t){return e.filter((function(e){return e.positionY===t}))},y=function(e){return g(e)+1},g=function(e){return Math.max.apply(Math,[0].concat(Object(s.a)(e.map((function(e){return e.id})))))},w={ArrowUp:function(e){return l.map((function(t){return v(x(e,t),"left")})).flat()},ArrowDown:function(e){return l.map((function(t){return v(x(e,t),"right")})).flat()},ArrowRight:function(e){return l.map((function(t){return j(m(e,t),"right")})).flat()},ArrowLeft:function(e){return l.map((function(t){return j(m(e,t),"left")})).flat()}},N=420,C=520,E=73,M=97,k=121,S=(n(15),n(0)),A=Object(r.memo)((function(e){return Object(S.jsx)("div",{className:"tile tile-".concat(e.value),style:{transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},children:Object(S.jsx)("div",{className:"tileInner ".concat(e.type),children:e.value})})})),P=(n(17),function(e){return Object(S.jsx)("div",{children:e.tiles.map((function(t){return Object(S.jsx)(A,{value:t.value,type:t.type,x:t.positionY*e.factor,y:t.positionX*e.factor},t.id)}))})}),L=function(e){var t=Object(r.useState)(T()),n=Object(a.a)(t,2),i=n[0],c=n[1];Object(r.useEffect)((function(){var e=function(){c(T())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var o=e.tiles.sort((function(e,t){return e.id-t.id}));return Object(S.jsx)("div",{className:"tileContainer",children:Object(S.jsx)(P,{tiles:o,factor:i})})},T=function(){return window.innerWidth<=N?E:window.innerWidth<=C?M:k},X=(n(18),n(19),function(e){return Object(S.jsx)("button",{id:e.id,className:"appButton",onClick:e.onClick,children:e.children})}),Y=function(){var e=ee().dispatch;return Object(S.jsxs)("div",{id:"gameOverContainer",className:"gameOverContainer",children:[Object(S.jsx)("p",{children:"Game Over!"}),Object(S.jsx)(X,{onClick:function(t){return e({type:"restart"})},children:"Try again"})]})},B=function(e){return Object(S.jsxs)("div",{className:"boardContainer",children:[d(e.tiles)&&Object(S.jsx)(Y,{}),Object(S.jsx)(I,{}),Object(S.jsx)(L,{tiles:e.tiles})]})},I=function(){var e=Array.from(Array(4).keys()).map((function(e){var t=Array.from(Array(4).keys()).map((function(e){return Object(S.jsx)("div",{className:"cell"},e)}));return Object(S.jsx)("div",{className:"row",children:t},e)}));return Object(S.jsx)("div",{className:"gridContainer",children:e})},R=function(){var e=ee().gameState,t=Object(r.useReducer)(G,J()),n=Object(a.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){c({type:"addMove",payload:e})}),[e]),Object(r.useEffect)((function(){i.moves.length<2||i.loading||(c({type:"startMove"}),setTimeout((function(){c({type:"endMove"})}),100))}),[i]),Object(S.jsx)(B,{tiles:i.tiles})};function G(e,t){switch(t.type){case"addMove":return!t.payload.lastMove?J(t.payload.tiles,[t.payload]):Object(u.a)(Object(u.a)({},e),{},{moves:[].concat(Object(s.a)(e.moves),[t.payload])});case"startMove":var n=e.moves[0],r=e.moves[1],i=w[r.lastMove](n.tiles);return Object(u.a)(Object(u.a)({},e),{},{loading:!0,tiles:i});case"endMove":var c=e.moves[1];return{moves:e.moves.slice(1),loading:!1,tiles:c.tiles};default:throw new Error("Unhandled action: ".concat(t))}}var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{moves:t,loading:!1,tiles:e}},U=(n(20),n(21),function(e){return Object(S.jsxs)("div",{className:"scoreBox",children:[Object(S.jsx)("span",{className:"title",children:e.title}),Object(S.jsx)("span",{className:"score",children:e.score})]})}),D=(n(22),function(){var e=ee().gameState,t=Object(r.useReducer)(W,F(e.tiles)),n=Object(a.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){c({type:"change",payload:e.tiles})}),[e]),Object(r.useEffect)((function(){if(i.newPoints>0){var e=document.getElementById("additionScore");e.innerText="+".concat(i.newPoints);var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)}}),[i]),Object(S.jsxs)("div",{className:"scoresContainer",children:[Object(S.jsxs)("div",{style:{position:"relative"},children:[Object(S.jsx)(U,{title:"SCORE",score:i.score}),Object(S.jsx)("div",{className:"addScore",id:"additionScore"})]}),Object(S.jsx)(U,{title:"BEST",score:i.score})]})}),F=function(e){return{score:0,newPoints:0,tiles:e}},z=function(e,t){return e.some((function(e){return e.id===t.id}))},W=function(e,t){switch(t.type){case"change":var n=t.payload;if(2===n.length&&[1,2].every((function(e){return n.find((function(t){return t.id===e}))}))&&!e.tiles.every((function(e){return z(n,e)})))return F(n);if(e.tiles.every((function(e){return z(n,e)}))&&n.length===e.tiles.length+1)return Object(u.a)(Object(u.a)({},e),{},{tiles:n,newPoints:0});var r=g(n),i=n.reduce((function(t,n){return t+(n.id===r||z(e.tiles,n)?0:parseInt(n.value))}),0);return{tiles:n,newPoints:i,score:e.score+i};default:throw new Error("Unhandled action type: ".concat(t.type))}},H=(n(23),function(){return Object(S.jsx)("span",{className:"gameTitle",children:"2048"})}),q=function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("span",{children:"Join the tiles, get to 2048!"}),Object(S.jsx)("br",{}),Object(S.jsx)("a",{href:"#id",children:"How to play \u2192"})]})},K=function(){var e=ee().dispatch;return Object(S.jsxs)("div",{className:"header",children:[Object(S.jsxs)("div",{className:"centeredText",children:[Object(S.jsx)(H,{}),Object(S.jsx)(q,{})]}),Object(S.jsxs)("div",{className:"actions",children:[Object(S.jsx)(D,{}),Object(S.jsx)(X,{id:"restartGameBtn",onClick:function(t){return e({type:"restart"})},children:"New Game"})]})]})},Q=i.a.createContext(null),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return{tiles:h(e),lastMove:null}};function Z(e,t){switch(t.type){case"restart":return V();case"move":var n=(0,w[t.payload])(e.tiles);return r=e.tiles,i=n,r.every((function(e){return i.some((function(t){return f(e,t)}))}))?e:(n=function(e){var t=y(e),n={};return e.forEach((function(e){var r="".concat(e.positionX).concat(e.positionY);if(n[r]){var i=2*parseInt(e.value);n[r]=Object(u.a)(Object(u.a)({},e),{},{id:t++,value:i.toString(),type:"merged"})}else n[r]=e})),Object.values(n)}(n),{tiles:[].concat(Object(s.a)(n),[O(n)]),lastMove:t.payload});default:throw new Error("Unhandled action: ".concat(t))}var r,i}var $=function(e){var t=Object(r.useReducer)(Z,V()),n=Object(a.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){var e=function(e){e.preventDefault(),["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key)&&c({type:"move",payload:e.key})};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[c]),Object(S.jsx)(Q.Provider,{value:{gameState:i,dispatch:c},children:e.children})},_=function(){return Object(S.jsx)($,{children:Object(S.jsxs)("div",{className:"gameContainer",children:[Object(S.jsx)(K,{}),Object(S.jsx)(R,{})]})})};function ee(){var e=Object(r.useContext)(Q);if(void 0===e)throw new Error("useGameContext must be used within a GameContextProvider");return e}var te=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)("main",{children:Object(S.jsx)(_,{})})})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),c(e),o(e)}))};o.a.render(Object(S.jsx)(i.a.StrictMode,{children:Object(S.jsx)(te,{})}),document.getElementById("root")),ne()}],[[24,1,2]]]);
//# sourceMappingURL=main.b01920d7.chunk.js.map