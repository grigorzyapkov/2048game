(this.webpackJsonp2048game=this.webpackJsonp2048game||[]).push([[0],[,,,,,,,,,,,,,function(n,e,t){},function(n,e,t){},function(n,e,t){},,function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t.r(e);var r=t(1),c=t.n(r),i=t(8),l=t.n(i),o=(t(13),t(14),t(3)),u=(t(15),t(0)),a=function(n){return Object(u.jsx)("div",{className:"container",children:n.children})},s=(t(17),function(n){return Object(r.useEffect)((function(){}),[n.showAddition]),Object(u.jsxs)("div",{className:"scoreBox",children:[Object(u.jsx)("span",{className:"title",children:n.title}),Object(u.jsx)("span",{className:"score",children:n.score})]})}),j=function(){var n=Object(r.useContext)(L),e=n.score,t=n.addScore;return Object(r.useEffect)((function(){if(0!==t){var n=document.createElement("div");n.id="additionScore",n.classList.add("addScore"),n.innerText="+".concat(t);var e=document.getElementById("currentScoreBox");2===e.childElementCount?e.replaceChild(n,e.lastChild):e.appendChild(n)}}),[e,t]),Object(u.jsxs)("div",{className:"scoresContainer",children:[Object(u.jsx)("div",{id:"currentScoreBox",style:{position:"relative"},children:Object(u.jsx)(s,{title:"SCORE",score:e})}),Object(u.jsx)(s,{title:"BEST",score:e})]})},f=t(5),d=t(2),b=function(n){var e=v(n),t=Object(o.a)(e,1)[0];if(t.flat().includes(null))return!1;for(var r=0;r<t.length;r++)for(var c=0;c<t.length-1;c++)if(t[r][c].value===t[r][c+1].value||t[c][r].value===t[c+1][r].value)return!1;return!0},v=function(n){var e=N(n),t=0,r={};n.flat().filter((function(n){return null!==n})).forEach((function(n){var c="".concat(n.positionX).concat(n.positionY);if(r[c]){var i=2*parseInt(n.value);r[c]=Object(d.a)(Object(d.a)({},n),{},{id:e++,value:i.toString()}),t+=i}else r[c]=n}));var c=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]];return Object.values(r).forEach((function(n){return c[n.positionX][n.positionY]=n})),[c,t]},O=function(n){return n.map((function(n){return g(n)}))},h=function(n){return n.map((function(n){return p(n)}))},x=function(n){for(var e=[[],[],[],[]],t=0;t<4;t++)for(var r=p(C(n,t)),c=0;c<4;c++)e[c][t]=r[c]&&Object(d.a)(Object(d.a)({},r[c]),{},{positionX:r[c].positionY,positionY:t});return e},m=function(n){for(var e=[[],[],[],[]],t=0;t<4;t++)for(var r=g(C(n,t)),c=0;c<4;c++)e[c][t]=r[c]&&Object(d.a)(Object(d.a)({},r[c]),{},{positionX:r[c].positionY,positionY:t});return e},p=function(n){return g(Object(f.a)(n).reverse()).reverse().map((function(n){return n&&Object(d.a)(Object(d.a)({},n),{},{positionY:Math.abs(3-n.positionY)})}))},g=function(n){for(var e=[],t=3,r=3;r>=0;r--)null!==n[r]&&(e[t]=Object(d.a)(Object(d.a)({},n[r]),{},{positionY:t}),t--);for(var c=0;c<=t;c++)e[c]=null;for(var i=3;i>=1;){var l;if(null!==e[i]&&e[i].value===(null===(l=e[i-1])||void 0===l?void 0:l.value)&&"2048"!==e[i].value){for(var o=i-1;o>=0&&e[o];o--)e[o].positionY+=1;i-=2;break}i--}return e},C=function(n,e){return n.map((function(n){return n[e]}))},N=function(n){return S(n)+1},S=function(n){return Math.max.apply(Math,n.flat().filter((function(n){return null!==n})).map((function(n){return n.id})))},y=(t(18),function(n){return Object(u.jsx)("button",{className:"appButton",onClick:n.onClick,children:n.children})}),w=(t(19),function(n){var e=121*n.x,t=121*n.y;return Object(u.jsx)("div",{className:"tile tile-".concat(n.value),style:{transform:"translate(".concat(e,"px, ").concat(t,"px)")},children:Object(u.jsx)("div",{className:"tileInner",children:n.value})})}),Y=(t(20),function(n){return Object(u.jsx)("div",{className:"boardContainer",children:n.children})}),k=function(){var n=Object(r.useContext)(L).handleRestart;return Object(u.jsxs)("div",{id:"gameOverContainer",className:"gameOverContainer",children:[Object(u.jsx)("p",{children:"Game Over!"}),Object(u.jsx)(y,{onClick:n,children:"Try again"})]})},E=function(){var n=Array.from(Array(4).keys()).map((function(n){var e=Array.from(Array(4).keys()).map((function(n){return Object(u.jsx)("div",{className:"cell"},n)}));return Object(u.jsx)("div",{className:"row",children:e},n)}));return Object(u.jsx)("div",{className:"gridContainer",children:n})},A=function(n){return Object(u.jsx)(u.Fragment,{children:n.values.map((function(n){return Object(u.jsx)(w,{value:n.value,x:n.positionY,y:n.positionX},n.id)}))})},T=function(){var n=Object(r.useContext)(L).boardState.reduce((function(n,e){return[].concat(Object(f.a)(n),Object(f.a)(e.filter((function(n){return null!==n}))))}),[]).sort((function(n,e){return n.id-e.id}));return Object(u.jsx)("div",{className:"tileContainer",children:Object(u.jsx)(A,{values:n})})},B=function(){var n=Object(r.useContext)(L).boardState;return Object(u.jsxs)(Y,{children:[b(n)&&Object(u.jsx)(k,{}),Object(u.jsx)(E,{}),Object(u.jsx)(T,{})]})},X=(t(21),function(){return Object(u.jsx)("span",{className:"gameTitle",children:"2048"})}),J=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:"Join the tiles, get to 2048!"}),Object(u.jsx)("br",{}),Object(u.jsx)("a",{href:"#id",children:"How to play \u2192"})]})},M=function(){var n=Object(r.useContext)(L).handleRestart;return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)(X,{}),Object(u.jsx)(j,{})]}),Object(u.jsxs)("div",{className:"flexWithSpaceBetween",children:[Object(u.jsx)(J,{}),Object(u.jsx)(y,{onClick:function(e){return n()},children:"New Game"})]})]})},L=c.a.createContext(null),F={ArrowUp:x,ArrowDown:m,ArrowRight:O,ArrowLeft:h},I=function(){var n=Object(r.useState)([].concat(R)),e=Object(o.a)(n,2),t=e[0],c=e[1],i=Object(r.useState)(0),l=Object(o.a)(i,2),s=l[0],j=l[1],f=Object(r.useState)(0),d=Object(o.a)(f,2),b=d[0],O=d[1];Object(r.useEffect)((function(){var n=function(n){n.preventDefault();var e=F[n.key];if(e){var r,i,l=e(t);if(r=t,i=l,JSON.stringify(r)!==JSON.stringify(i))console.log("after move",l),c(l),setTimeout((function(){var n=v(l),e=Object(o.a)(n,2),t=e[0],r=e[1];console.log("after merge",t),c(t),j(s+r),O(r),setTimeout((function(){var n=G(t);console.log("after random number",n),c(n)}),100)}),0)}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[t,s]);return Object(u.jsx)(L.Provider,{value:{boardState:t,score:s,addScore:b,handleRestart:function(){c(D),setTimeout((function(){c([].concat(R))}),100),j(0)}},children:Object(u.jsxs)(a,{children:[Object(u.jsx)(M,{}),Object(u.jsx)(y,{onClick:function(){c(G(t))},children:"Generate Tile"}),Object(u.jsx)(B,{})]})})},R=[[null,null,null,null],[null,null,{id:1,value:"2",positionX:1,positionY:2},null],[null,{id:2,value:"2",positionX:2,positionY:1},null,null],[null,null,null,null]],D=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],G=function(n){for(var e=Math.random()<=.2?"4":"2",t=JSON.parse(JSON.stringify(n)),r=N(t),c=t.reduce((function(n,e){return n+e.filter((function(n){return null===n})).length}),0),i=Math.floor(Math.random()*c)+1,l=0,o=0;o<t.length;o++)for(var u=0;u<t[o].length;u++)if(null===t[o][u]&&l++,l===i)return t[o][u]={id:r,value:e,positionX:o,positionY:u},t;return t};var P=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("header",{}),Object(u.jsx)("main",{children:Object(u.jsx)(I,{})})]})},H=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,23)).then((function(e){var t=e.getCLS,r=e.getFID,c=e.getFCP,i=e.getLCP,l=e.getTTFB;t(n),r(n),c(n),i(n),l(n)}))};l.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(P,{})}),document.getElementById("root")),H()}],[[22,1,2]]]);
//# sourceMappingURL=main.2cdc7469.chunk.js.map